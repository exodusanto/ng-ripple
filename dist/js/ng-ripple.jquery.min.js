/*!
* Author: Antonio Dal Sie
* Name: ng-ripple
* Description: Material ripple effects for angularjs
*/
!function(e,n){var t=angular.module("ngRipple",[]);t.constant("rippleConfig",{rippleOpacity:.2,rippleDelay:100,mobileTouch:!1}),t.directive("ripple",["rippleConfig",function(n){function t(t,o,l){function s(t){function o(){var e=(x-E)/100*10;Y=setInterval(function(){x>E?(E+=e,A.css({height:M+E,width:M+E})):clearInterval(Y)},50)}function s(){e(window).bind(m.end+" blur",a),e(y).bind("mouseleave",a)}function a(){e(window).unbind("stopAllInk",v),e(window).unbind("scroll",v),e(window).unbind("explodeAllInk",a),e(window).unbind(m.end+" blur",a),e(y).unbind("mouseleave",a),clearInterval(Y),clearInterval(H),clearInterval(P);var t=x>=E?n.rippleDelay:1;E=x>E?x:E,A.css({height:M+E,width:M+E}),setTimeout(function(){T.css({opacity:0}),A.hasClass("new")&&!p&&C.css("background-color",""),setTimeout(function(){A.remove(),f&&!C.find(".ink").length&&C.css("display","")},550)},t)}function v(){g=!0,e(window).unbind("stopAllInk",v),e(window).unbind("scroll",v),e(window).unbind("explodeAllInk",a),e(window).unbind(m.end+" blur scroll",a),y.unbind("mouseleave",a),clearInterval(Y),clearInterval(H),clearInterval(P),A.hasClass("new")&&!p&&C.css("background-color",""),A.remove(),f&&!C.find(".ink").length&&C.css("display","")}var g=!1,w=t.timeStamp;if(0==w){var k=new Date;w=k.getTime()}var y=e(t.currentTarget).closest(".ripple-cont"),C=y.children(".ink-content");if(e(y).hasClass("r-childprevent"))return e(y).removeClass("r-childprevent");if(e(y).parents(".ripple-cont").addClass("r-childprevent"),-1==r.indexOf(w)){r.push(w);var I=e(t.target);if("undefined"==typeof l.rDisabled&&!e(y).hasClass("disabled")&&!I.hasClass("r-noink")&&!I.parents(".r-noink").length&&("mousedown"!=t.type&&"touchstart"!=t.type||!I.hasClass("r-noink-hover")&&!I.parents(".r-noink-hover").length)&&("click"!=t.type||b||I.hasClass("r-noink-hover")||I.parents(".r-noink-hover").length)&&!(h&&e(y).is(h)||(e(window).bind("stopAllInk",v),e(window).bind("explodeAllInk",a),1==g))){f&&C.show(0);var A=e("<div class='ink'><i></i></div>"),T=A.find("i"),E=0,x=0,H=null,P=null;C.find(".ink").removeClass("new"),A.addClass("new"),C.prepend(A);var O="touchstart"!=t.type?t.pageX-C.offset().left:t.originalEvent.touches[0].pageX-C.offset().left,D="touchstart"!=t.type?t.pageY-C.offset().top:t.originalEvent.touches[0].pageY-C.offset().top;if(p?(O=0,D=0):(A.css({top:D+"px",left:O+"px"}),O=O>C.outerWidth()/2?O-C.outerWidth()/2:C.outerWidth()/2-O,D=D>C.outerHeight()/2?D-C.outerHeight()/2:C.outerHeight()/2-D),1!=g){var L=2*O+2*D,W=C.outerHeight(),F=C.outerWidth(),M=Math.sqrt(F*F+W*W),x=L;x=p?0:x,A.css({height:M,width:M}),T.css("opacity",0);var N=u||n.rippleOpacity;if(d?T.css("background-color",d):c&&T.css("background-color","rgb(255,255,255)"),!p)if(C.css("background-color","rgba(0,0,0,0.098)"),d){var X=i(d);C.css("background-color","rgba("+X.r+","+X.g+","+X.b+",0.098)")}else c&&C.css("background-color","rgba(255,255,255,0.098)");if(setTimeout(function(){1!=g&&A.addClass("animate")},1),1!=g){T.css({opacity:N});var Y=null;1!=g&&(o(),"mousedown"==t.type&&1!==t.which?setTimeout(function(){a()},100):"click"==t.type?setTimeout(function(){a()},100):"touchstart"==t.type?(H=setTimeout(function(){a()},1e3),e(window).bind("scroll",v),P=setTimeout(function(){e(window).unbind("scroll",v)},500),s()):s())}}}}}var a=null,c=!1,d=!1,u=null,p=!1,f=!1,h=!1,v=!1,b="ontouchstart"in document.documentElement;a=e(o),f=a.hasClass("r-overink"),"undefined"!=typeof PointerEventsPolyfill&&PointerEventsPolyfill.initialize({selector:a,mouseEvents:["click","dblclick"]}),a.addClass("ripple"),f&&a.removeAttr("href"),v=a.find(".r-noink-hover").length>0;var m={start:"ontouchstart"in document.documentElement?n.mobileTouch?"touchstart":"click":"mousedown",end:"ontouchend"in document.documentElement?"touchend":"mouseup dragend"};o.on("$destroy",function(){a.unbind(m.start,s)}),p=a.hasClass("r-icon"),c="undefined"!=typeof l.rLight,d="undefined"!=typeof l.rColor?l.rColor:!1,u="undefined"!=typeof l.rOpacity?l.rOpacity:null,h="undefined"!=typeof l.rPrevent?l.rPrevent:!1,a.unbind(m.start,s),a.bind(m.start,s),!v||b&&!n.mobileTouch||(a.find(".r-noink-hover").unbind("click",s),a.find(".r-noink-hover").bind("click",s))}function i(e){var n=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,t=n.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function o(n){if(e(n).hasClass("ripple-cont")){for(;e(n)[0].attributes.length>0;)e(n)[0].removeAttribute(e(n)[0].attributes[0].name);return n[0].outerHTML}var t=e(n).html(),i=e("<button></button>"),o=n.hasClass("r-overink");if(o){i=e("<div></div>");var r=e("<button></button>")}if("ripple"!=e(n).prop("nodeName").toLowerCase()){var l=e(n).clone();l=e(l),l.empty(),l.prop("className",""),l.removeAttr("ripple"),l.removeAttr("data-ripple"),e.each(l.prop("attributes"),function(e,n){n.name.match(/^ng-*/)&&l.removeAttr(n.name)}),o?r=l:i=l}return i.addClass("ripple-cont"),o?(r.addClass("ripple-content"),r.html(t),i.append(r)):i.append("<div class='ripple-content'>"+t+"</div>"),i.append("<div class='ink-content'></div>"),i[0].outerHTML}var r=[];return{restrict:"AEC",link:t,template:o,replace:!0}}])}(jQuery,window);